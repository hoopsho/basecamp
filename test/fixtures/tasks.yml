# frozen_string_literal: true

# Task fixtures define running instances of SOPs

pending_task:
  sop: past_customer_reactivation
  agent: marketing_agent
  status: 0
  current_step_position: 0
  context:
    triggered_by: 'schedule'
    triggered_at: '<%= Time.current.iso8601 %>'
  priority: 5
  created_at: <%= 10.minutes.ago %>
  updated_at: <%= 10.minutes.ago %>

in_progress_task:
  sop: new_lead_response
  agent: lead_response_agent
  status: 1
  current_step_position: 1
  context:
    email_from: 'prospect@example.com'
    email_subject: 'Need lawn care'
    email_body: 'Looking for lawn care in Twin Cities'
    customer_name: 'Michael Chen'
    step_0_result: 'new_lead'
    step_0_confidence: 0.92
  priority: 8
  started_at: <%= 30.minutes.ago %>
  created_at: <%= 30.minutes.ago %>
  updated_at: <%= 5.minutes.ago %>

completed_task:
  sop: past_customer_reactivation
  agent: marketing_agent
  status: 4
  current_step_position: 2
  context:
    customer_name: 'Sarah Johnson'
    customer_email: 'sarah.j@example.com'
    previous_service: 'fertilizer'
  priority: 5
  started_at: <%= 3.days.ago %>
  completed_at: <%= 2.days.ago %>
  slack_thread_ts: '1234567890.123456'
  created_at: <%= 3.days.ago %>
  updated_at: <%= 2.days.ago %>

waiting_on_human_task:
  sop: new_lead_response
  agent: lead_response_agent
  status: 2
  current_step_position: 2
  context:
    email_from: 'emily.r@example.com'
    customer_name: 'Emily Rodriguez'
    lead_quality: 'warm'
    draft_email_body: 'Hi Emily, Thank you for your interest...'
  priority: 7
  started_at: <%= 3.hours.ago %>
  slack_thread_ts: '1234567892.345678'
  created_at: <%= 3.hours.ago %>
  updated_at: <%= 2.hours.ago %>
