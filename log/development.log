  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35m (157.7ms)[0m  [1m[35mCREATE DATABASE "basecamp_development" ENCODING = 'unicode' /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35m (158.1ms)[0m  [1m[35mCREATE DATABASE "basecamp_test" ENCODING = 'unicode' /*application='Basecamp'*/[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='Basecamp'*/[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Basecamp'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4339464625617394455) /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2026-02-08 22:10:02.192161', '2026-02-08 22:10:02.192165') RETURNING "key" /*application='Basecamp'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4339464625617394455) /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Basecamp'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4339464625617394455) /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
Migrating to EnablePgcrypto (20250208000001)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35mSQL (8.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000001') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (9.1ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateAgents (20250208000002)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "agents" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "slug" character varying NOT NULL, "description" text, "status" integer DEFAULT 0 NOT NULL, "slack_channel" character varying, "loop_interval_minutes" integer, "capabilities" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Basecamp'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_agents_on_slug" ON "agents" ("slug") /*application='Basecamp'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_agents_on_status" ON "agents" ("status") /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_agents_on_capabilities" ON "agents" USING gin ("capabilities") /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000002') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateSops (20250208000003)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "sops" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agent_id" uuid NOT NULL, "name" character varying NOT NULL, "slug" character varying NOT NULL, "description" text, "trigger_type" integer DEFAULT 0 NOT NULL, "trigger_config" jsonb DEFAULT '{}', "required_services" character varying[] DEFAULT '{}', "status" integer DEFAULT 0 NOT NULL, "version" integer DEFAULT 1 NOT NULL, "max_tier" integer DEFAULT 3 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_04ea5961c2"
FOREIGN KEY ("agent_id")
  REFERENCES "agents" ("id")
) /*application='Basecamp'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_sops_on_agent_id" ON "sops" ("agent_id") /*application='Basecamp'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sops_on_slug" ON "sops" ("slug") /*application='Basecamp'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_sops_on_agent_id" ON "sops" ("agent_id") /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='Basecamp'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4339464625617394455) /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35m (231.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "basecamp_development" /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35m (156.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "basecamp_test" /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35m (168.8ms)[0m  [1m[35mCREATE DATABASE "basecamp_development" ENCODING = 'unicode' /*application='Basecamp'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35m (163.3ms)[0m  [1m[35mCREATE DATABASE "basecamp_test" ENCODING = 'unicode' /*application='Basecamp'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='Basecamp'*/[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[35m (6.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0) /*application='Basecamp'*/[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (6.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2026-02-08 22:16:14.670646', '2026-02-08 22:16:14.670654') RETURNING "key" /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (6.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'a71d23a9d8025196df4aad6f0cbff1ce3af537cf', '2026-02-08 22:16:14.686760', '2026-02-08 22:16:14.686764') RETURNING "key" /*application='Basecamp'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4339464625617394455) /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='Basecamp'*/[0m
Migrating to EnablePgcrypto (20250208000001)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35mSQL (14.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000001') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateAgents (20250208000002)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "agents" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying NOT NULL, "slug" character varying NOT NULL, "description" text, "status" integer DEFAULT 0 NOT NULL, "slack_channel" character varying, "loop_interval_minutes" integer, "capabilities" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_agents_on_slug" ON "agents" ("slug") /*application='Basecamp'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_agents_on_status" ON "agents" ("status") /*application='Basecamp'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_agents_on_capabilities" ON "agents" USING gin ("capabilities") /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000002') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateSops (20250208000003)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "sops" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agent_id" uuid NOT NULL, "name" character varying NOT NULL, "slug" character varying NOT NULL, "description" text, "trigger_type" integer DEFAULT 0 NOT NULL, "trigger_config" jsonb DEFAULT '{}', "required_services" character varying[] DEFAULT '{}', "status" integer DEFAULT 0 NOT NULL, "version" integer DEFAULT 1 NOT NULL, "max_tier" integer DEFAULT 3 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_04ea5961c2"
FOREIGN KEY ("agent_id")
  REFERENCES "agents" ("id")
) /*application='Basecamp'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_sops_on_agent_id" ON "sops" ("agent_id") /*application='Basecamp'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sops_on_slug" ON "sops" ("slug") /*application='Basecamp'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_sops_on_status" ON "sops" ("status") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_sops_on_trigger_type" ON "sops" ("trigger_type") /*application='Basecamp'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_sops_on_required_services" ON "sops" USING gin ("required_services") /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000003') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (16.1ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateSteps (20250208000004)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "steps" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "sop_id" uuid NOT NULL, "position" integer NOT NULL, "name" character varying NOT NULL, "description" text, "step_type" integer DEFAULT 0 NOT NULL, "config" jsonb DEFAULT '{}', "llm_tier" integer DEFAULT 0, "max_llm_tier" integer DEFAULT 3, "on_success" character varying DEFAULT 'next', "on_failure" character varying DEFAULT 'fail', "on_uncertain" character varying DEFAULT 'escalate_tier', "max_retries" integer DEFAULT 3, "timeout_seconds" integer DEFAULT 300, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_587b0949a1"
FOREIGN KEY ("sop_id")
  REFERENCES "sops" ("id")
) /*application='Basecamp'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_steps_on_sop_id" ON "steps" ("sop_id") /*application='Basecamp'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_steps_on_sop_id_and_position" ON "steps" ("sop_id", "position") /*application='Basecamp'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_steps_on_step_type" ON "steps" ("step_type") /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000004') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (6.7ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateTasks (20250208000005)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "tasks" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "sop_id" uuid NOT NULL, "agent_id" uuid NOT NULL, "status" integer DEFAULT 0 NOT NULL, "current_step_position" integer DEFAULT 1, "context" jsonb DEFAULT '{}', "priority" integer DEFAULT 5, "started_at" timestamp(6), "completed_at" timestamp(6), "error_message" text, "parent_task_id" uuid, "slack_thread_ts" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_0ab70e79fa"
FOREIGN KEY ("sop_id")
  REFERENCES "sops" ("id")
, CONSTRAINT "fk_rails_ffa0a54871"
FOREIGN KEY ("agent_id")
  REFERENCES "agents" ("id")
) /*application='Basecamp'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_tasks_on_sop_id" ON "tasks" ("sop_id") /*application='Basecamp'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_tasks_on_agent_id" ON "tasks" ("agent_id") /*application='Basecamp'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_tasks_on_status" ON "tasks" ("status") /*application='Basecamp'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_tasks_on_priority" ON "tasks" ("priority") /*application='Basecamp'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_tasks_on_parent_task_id" ON "tasks" ("parent_task_id") /*application='Basecamp'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_tasks_on_context" ON "tasks" USING gin ("context") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_tasks_on_agent_id_and_status" ON "tasks" ("agent_id", "status") /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_tasks_on_sop_id_and_status" ON "tasks" ("sop_id", "status") /*application='Basecamp'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "tasks" ADD CONSTRAINT "fk_rails_9d099ad687"
FOREIGN KEY ("parent_task_id")
  REFERENCES "tasks" ("id")
 /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000005') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (9.0ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateTaskEvents (20250208000006)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "task_events" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "task_id" uuid NOT NULL, "step_id" uuid, "event_type" integer NOT NULL, "llm_tier_used" integer, "llm_model" character varying, "llm_tokens_in" integer, "llm_tokens_out" integer, "input_data" jsonb DEFAULT '{}', "output_data" jsonb DEFAULT '{}', "confidence_score" float, "duration_ms" integer, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_763c41facb"
FOREIGN KEY ("task_id")
  REFERENCES "tasks" ("id")
, CONSTRAINT "fk_rails_a69730f1d9"
FOREIGN KEY ("step_id")
  REFERENCES "steps" ("id")
) /*application='Basecamp'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_task_events_on_task_id" ON "task_events" ("task_id") /*application='Basecamp'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_task_events_on_step_id" ON "task_events" ("step_id") /*application='Basecamp'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_task_events_on_event_type" ON "task_events" ("event_type") /*application='Basecamp'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_task_events_on_created_at" ON "task_events" ("created_at") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_task_events_on_task_id_and_created_at" ON "task_events" ("task_id", "created_at") /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000006') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateWatchers (20250208000007)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "watchers" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agent_id" uuid NOT NULL, "sop_id" uuid NOT NULL, "name" character varying NOT NULL, "check_type" integer NOT NULL, "check_config" jsonb DEFAULT '{}', "interval_minutes" integer NOT NULL, "last_checked_at" timestamp(6), "status" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d008b49077"
FOREIGN KEY ("agent_id")
  REFERENCES "agents" ("id")
, CONSTRAINT "fk_rails_978fa83dcf"
FOREIGN KEY ("sop_id")
  REFERENCES "sops" ("id")
) /*application='Basecamp'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_watchers_on_agent_id" ON "watchers" ("agent_id") /*application='Basecamp'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_watchers_on_sop_id" ON "watchers" ("sop_id") /*application='Basecamp'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_watchers_on_status" ON "watchers" ("status") /*application='Basecamp'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_watchers_on_check_type" ON "watchers" ("check_type") /*application='Basecamp'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_watchers_on_last_checked_at" ON "watchers" ("last_checked_at") /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000007') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateAgentMemories (20250208000008)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "agent_memories" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "agent_id" uuid NOT NULL, "memory_type" integer NOT NULL, "content" text NOT NULL, "importance" integer DEFAULT 5, "expires_at" timestamp(6), "related_task_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_43188ac48f"
FOREIGN KEY ("agent_id")
  REFERENCES "agents" ("id")
) /*application='Basecamp'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_agent_memories_on_agent_id" ON "agent_memories" ("agent_id") /*application='Basecamp'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_agent_memories_on_memory_type" ON "agent_memories" ("memory_type") /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_agent_memories_on_importance" ON "agent_memories" ("importance") /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_agent_memories_on_expires_at" ON "agent_memories" ("expires_at") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_agent_memories_on_related_task_id" ON "agent_memories" ("related_task_id") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_agent_memories_on_agent_id_and_importance" ON "agent_memories" ("agent_id", "importance") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_agent_memories_on_agent_id_and_created_at" ON "agent_memories" ("agent_id", "created_at") /*application='Basecamp'*/[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "agent_memories" ADD CONSTRAINT "fk_rails_904fa31418"
FOREIGN KEY ("related_task_id")
  REFERENCES "tasks" ("id")
 /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000008') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateCredentials (20250208000009)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "credentials" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "service_name" character varying NOT NULL, "credential_type" integer NOT NULL, "encrypted_value" text NOT NULL, "scopes" character varying[] DEFAULT '{}', "expires_at" timestamp(6), "encrypted_refresh_token" text, "status" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_credentials_on_service_name" ON "credentials" ("service_name") /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_credentials_on_credential_type" ON "credentials" ("credential_type") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_credentials_on_status" ON "credentials" ("status") /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_credentials_on_expires_at" ON "credentials" ("expires_at") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_credentials_on_scopes" ON "credentials" USING gin ("scopes") /*application='Basecamp'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_credentials_on_service_name_and_status" ON "credentials" ("service_name", "status") /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000009') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (16.0ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
Migrating to CreateUsers (20250208000010)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='Basecamp'*/[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "email_address" character varying NOT NULL, "password_digest" character varying NOT NULL, "role" integer DEFAULT 0 NOT NULL, "theme_preference" integer DEFAULT 2 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_address" ON "users" ("email_address") /*application='Basecamp'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_users_on_role" ON "users" ("role") /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250208000010') RETURNING "version" /*application='Basecamp'*/[0m
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mCOMMIT /*application='Basecamp'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4339464625617394455) /*application='Basecamp'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='Basecamp'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Basecamp'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='Basecamp'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO "$user", public /*application='Basecamp'*/[0m
